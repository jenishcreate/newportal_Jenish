@{
    ViewData["Title"] = "Credit Wallet";
}
<style>
    .form-label {
        font-size: 1.1rem;
    }

    .form-control-lg {
        font-size: 1.15rem;
    }

    .badge {
        font-size: 0.95rem;
        padding: 0.6em 1em;
    }

</style>
<div class="container-xxl flex-grow-1 container-p-y mt-4">
    <div class="card border-0 shadow-lg rounded-4">
        <!-- Header -->
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center py-3 px-4 rounded-top">
            <h4 class="mb-0 fw-bold  text-white"><i class="bx bx-wallet-alt me-2  text-white"></i> Credit Amount </h4>
        </div>

        <!-- Card Body -->
        <div class="card-body px-4 py-4">
            <!-- User Info Summary -->
            <div class="row g-4 mb-4">
                <div class="col-md-6">
                    <ul class="list-unstyled fs-6">
                        <li><strong>User: <b></strong> @ViewBag.UserName </li></b>
                        <br />
                        <li><strong>Company:</strong> @ViewBag.CompanyName</li>
                        <br />
                        <li><strong>Email:</strong> <span class="invert-text-dark">@ViewBag.EmailId</span></li>
                        <br />
                        <li><strong>Mobile:</strong> <span class="invert-text-dark">@ViewBag.MobileNo</span></li>
                        <br />
                        <li><strong>User Type:</strong> <span class="badge bg-label-info">@ViewBag.UserType</span></li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <ul class="list-unstyled fs-6">
                        <li><strong>Wallet Balance:</strong> <b><span class="fw-bold text-success">₹ @ViewBag.WalletBalance</span></b></li>
                        <br />
                        <li>
                            <strong>Status:</strong>
                            @if (Convert.ToBoolean(ViewBag.Status))
                            {
                                <span class="badge bg-label-success">Active</span>
                            }
                            else
                            {
                                <span class="badge bg-label-danger">Inactive</span>
                            }
                        </li>
                        <br />
                        <li><strong>Address:</strong> @ViewBag.Address</li>
                        <br />
                    </ul>
                </div>
            </div>

            <!-- Credit Form -->
            <form asp-action="CreditAmountPost" asp-controller="Wallet" asp-area="Distributor" method="post" class="mt-3">
                <input type="hidden" name="touserId" value="@ViewBag.UserId" />

                <div class="mb-4">
                    <label for="amount" class="form-label fw-semibold fs-5">Amount to Credit</label>
                    <input type="number" class="form-control form-control-lg shadow-sm fs-5" name="amount" id="amount"
                           step="0.01" min="1" required placeholder="e.g. 1000.00" />
                </div>

                <div class="d-flex justify-content-end gap-3">
                    <a asp-action="Index" asp-controller="Dashboard" asp-area="Distributor" class="btn btn-outline-secondary btn-lg px-4">Cancel</a>
                    <button type="submit" class="btn btn-success btn-lg px-4">
                        <i class="bx bx-rupee me-1"></i> Credit Now
                    </button>
                </div>
            </form>

            <!-- Alerts -->
            <!-- Alerts (Only One Will Show) -->
            @if (TempData["error"] != null)
            {
                <div class="alert alert-danger alert-dismissible fade show mt-4 fs-6" role="alert">
                    ❌ <strong>@TempData["error"]</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            }
            else if (TempData["success"] != null)
            {
                <div class="alert alert-success alert-dismissible fade show mt-4 fs-6" role="alert">
                    ✅ <strong>@TempData["success"]</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            }

        </div>
    </div>
</div>
@section Scripts {
    <script>
        // Automatically remove alert after 5 seconds
        setTimeout(function () {
            const successAlert = document.getElementById('alertSuccess');
            const errorAlert = document.getElementById('alertError');
            if (successAlert) successAlert.classList.remove('show');
            if (errorAlert) errorAlert.classList.remove('show');
        }, 5000);
    </script>
}
